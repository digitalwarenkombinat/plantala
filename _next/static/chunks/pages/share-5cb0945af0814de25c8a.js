(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347,237],{1685:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var r=t(5893),a=t(1664);function i(e){var n=e.children,t=e.href;return t.startsWith("/")||""===t?(0,r.jsx)(a.default,{href:t,passHref:!0,children:(0,r.jsx)("a",{children:n})}):(0,r.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:n})}},9744:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(5893),a=t(2809),i=t(1749),c=t(1120),o=t(5258),u=t(8358),s=t(2318),l=t(1685),d=t(8743).ZP.getState().mediaPath;function f(){return(0,r.jsx)(o.Z,{position:"absolute",children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(l.Z,{href:"/",children:(0,r.jsx)("div",{children:(0,r.jsx)("img",{alt:"Plantala Logo",src:"".concat("/plantala","/images/").concat(d,"logo.svg"),width:60,height:60})})}),(0,r.jsx)(s.Z,{variant:"h2",component:"h1",children:"Plantala"})]})})}var m=(0,c.Z)((function(e){return{root:(0,a.Z)({backgroundColor:e.palette.secondary.main,color:e.palette.text.primary,height:"100vh",paddingTop:e.spacing(8)},e.breakpoints.up("md"),{alignItems:"center",paddingTop:e.spacing(4)})}}));function h(e){var n=e.children,t=m();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f,{}),(0,r.jsx)(i.Z,{container:!0,component:"main",className:t.root,children:n})]})}},8743:function(e,n,t){"use strict";t.d(n,{zJ:function(){return s},Li:function(){return l},uN:function(){return d},Pr:function(){return f}});var r=t(2809),a=t(4671),i=t(8597),c=t(8607);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var s=5,l=".webp",d="_Lehrtafel.webp",f="_vektor.svg";var m=(0,a.Z)((0,i.tJ)((function(e,n){return{mediaPath:c.O.isMaaS?"":"plants/",media:c.O.images,imageMultiplier:1,colorMode:!0,getSelectedElements:function(){return n().media.filter((function(e){return!0===e.selected})).sort((function(e,n){return e.order-n.order}))},selectElement:function(t){return e((function(e){return{media:e.media.map((function(e){return e.name!==t.name?e:u(u({},e),{},{selected:!0,order:n().getSelectedElements().length+1})}))}}))},deselectElement:function(n){return e((function(e){return{media:e.media.map((function(e){return e.name!==n.name?function(e){return e.selected?u(u({},e),{},{order:1===e.order?1:e.order-1}):e}(e):u(u({},e),{},{selected:!1,order:0})}))}}))},getActiveElement:function(){return n().media.find((function(e){return!0===e.active}))},activateElement:function(n){return e((function(e){return{media:e.media.map((function(e){return e.name!==n.name?u(u({},e),{},{active:!1}):u(u({},e),{},{active:!0})}))}}))},transformElement:function(t,a){return e((function(e){return{media:e.media.map((function(e){return e.name!==n().getActiveElement().name?e:u(u({},e),{},(0,r.Z)({},t,a))}))}}))},resetElements:function(){return e((function(e){return{media:e.media.map((function(e){return u(u({},e),{},{selected:!1})}))}}))}}}),{name:"media-storage"}));n.ZP=m},4703:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return f}});var r=t(5893),a=t(1749),i=t(1120),c=t(7294),o=t(8743),u=o.ZP.getState().imageMultiplier;function s(e){var n=e.amount,t=void 0===n?4+2*e.order:n,r=e.rotation,a=void 0===r?0:r,i=e.scale,c=void 0===i?1:i,o=e.size,s=void 0===o?100*u:o;return{amount:t,distance:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60,n=arguments.length>1?arguments[1]:void 0;return e*n*u}(e.distance,e.order),rotation:a,step:Math.ceil(360/t),scale:c,size:s}}function l(e,n){for(var t=o.ZP.getState().mediaPath,r=o.ZP.getState().colorMode,a=s(n),i=a.amount,c=a.distance,l=a.rotation,d=a.step,f=a.scale,m=a.size,h=r?o.Li:o.Pr,p=function(r){var a=function(e,n,t,r){var a=n/(t/2)*Math.PI;return{imageX:r*Math.cos(a)+e.canvas.width*u/2,imageY:r*Math.sin(a)+e.canvas.height*u/2}}(e,r,i,c),o=a.imageX,s=a.imageY,p=function(e,n,t){return n+t*e*Math.PI/180}(r,l,d),g=new Image;g.onload=function(){e.setTransform(f,0,0,f,o,s),e.rotate(p),e.drawImage(g,-m/2,-m/2,m,m)},g.src="".concat("/plantala","/images/").concat(t).concat(n.source).concat(h)},g=0;g<i;g++)p(g)}var d=(0,i.Z)((function(){return{mandala:{width:"100%",height:"100%"}}})),f=function(){var e=d(),n=function(){var e=(0,c.useRef)(null),n=(0,o.ZP)(),t=n.colorMode,r=n.getSelectedElements,a=n.imageMultiplier,i=n.media;return(0,c.useEffect)((function(){if(i.length>0&&e.current){var n=e.current.getContext("2d");n&&(n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,n.canvas.width*a,n.canvas.height*a),r().forEach((function(e){l(n,e)})))}}),[t,r,a,i]),{canvasRef:e}}().canvasRef;return(0,r.jsx)(a.Z,{item:!0,xs:12,children:(0,r.jsx)("canvas",{ref:n,className:e.mandala,id:"plantalaCanvas",width:"800",height:"800"})})}},4167:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var r=t(5893),a=t(5152),i=t(9744),c=t(2809),o=t(1749),u=t(1120),s=t(2318),l=t(6562),d=t(1559),f=t(8743);function m(){return(0,r.jsx)(l.Z,{children:(0,r.jsx)(s.Z,{component:"div",paragraph:!0,children:(0,r.jsxs)(o.Z,{component:"label",container:!0,alignItems:"center",justifyContent:"center",spacing:1,children:[(0,r.jsx)(o.Z,{item:!0,children:"S/W"}),(0,r.jsx)(o.Z,{item:!0,children:(0,r.jsx)(d.Z,{checked:(0,f.ZP)((function(e){return e.colorMode})),onChange:function(){f.ZP.setState({colorMode:!f.ZP.getState().colorMode})},name:"colorMode",color:"primary"})}),(0,r.jsx)(o.Z,{item:!0,children:"Bunt"})]})})})}var h=t(809),p=t.n(h),g=t(266),v=t(7294),j=t(282),x=t(7116),Z=t(8216),y=t(5997),P=t(2125),b=t(3622),w=t(2953),O=t(4703);function E(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=(0,w.Z)(e);if(n){var a=(0,w.Z)(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return(0,b.Z)(this,t)}}var k=function(e){(0,P.Z)(t,e);var n=E(t);function t(){return(0,Z.Z)(this,t),n.apply(this,arguments)}return(0,y.Z)(t,[{key:"render",value:function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(O.default,{})})}}]),t}(v.PureComponent);function M(){return(M=(0,g.Z)(p().mark((function e(){var n,t,r,a,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.getElementById("plantalaCanvas"),t=n.toDataURL(),e.next=4,fetch(t);case 4:return e.next=6,e.sent.blob();case 6:r=e.sent,a=[new File([r],"Plantala_".concat((new Date).getTime(),".png"),{type:r.type,lastModified:(new Date).getTime()})],i={files:a},navigator.share&&navigator.share(i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(){var e=(0,v.useRef)(),n=(0,x.useReactToPrint)({content:function(){return e.current}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{display:"none"},children:(0,r.jsx)(k,{ref:e})}),(0,r.jsxs)(o.Z,{container:!0,spacing:2,justifyContent:"center",children:[(0,r.jsx)(o.Z,{item:!0,children:(0,r.jsx)(j.Z,{variant:"contained",color:"primary",disabled:!0,onClick:function(){return function(){return M.apply(this,arguments)}()},children:"Teilen"})}),(0,r.jsx)(o.Z,{item:!0,children:(0,r.jsx)(j.Z,{variant:"outlined",color:"primary",disabled:!0,onClick:n,children:"Drucken"})})]})]})},S=(0,u.Z)((function(e){return{shareImage:(0,c.Z)({padding:e.spacing(2),textAlign:"center"},e.breakpoints.up("sm"),{padding:e.spacing(4)})}})),C=function(){var e=S();return(0,r.jsxs)(o.Z,{item:!0,xs:12,className:e.shareImage,children:[(0,r.jsx)(s.Z,{variant:"h4",component:"h3",paragraph:!0,children:"Teile dein pers\xf6nliches Plantala oder drucke es aus!"}),(0,r.jsx)(m,{}),(0,r.jsx)(_,{})]})},R=t(3758),T=t(428),D=t(1685);function N(){return(0,r.jsx)(D.Z,{href:"/",children:(0,r.jsxs)(R.Z,{variant:"extended",color:"primary","aria-label":"replay",children:[(0,r.jsx)(T.Z,{}),"Noch mal ganz von vorn"]})})}var I=(0,a.default)((function(){return Promise.resolve().then(t.bind(t,4703))}),{ssr:!1,loadableGenerated:{webpack:function(){return[4703]},modules:["share.tsx -> ../components/ui/Mandala"]}});function L(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C,{}),(0,r.jsx)(I,{}),(0,r.jsx)(N,{})]})}L.getLayout=function(e){return(0,r.jsx)(i.Z,{children:e})}},1158:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/share",function(){return t(4167)}])}},function(e){e.O(0,[774,275,632,761,888,179],(function(){return n=1158,e(e.s=n);var n}));var n=e.O();_N_E=n}]);